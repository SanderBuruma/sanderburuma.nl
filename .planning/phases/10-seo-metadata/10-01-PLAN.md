---
phase: 10-seo-metadata
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/SEOHead.jsx
  - src/pages/BlogPost.jsx
  - src/pages/BlogIndex.jsx
  - src/pages/Portfolio.jsx
  - public/images/og-blog-default.svg
autonomous: true

must_haves:
  truths:
    - "Each blog post has unique title in browser tab"
    - "Each blog post has meta description visible to search engines"
    - "Each blog post has Open Graph tags for social sharing"
    - "Featured image appears in social media previews"
    - "Blog index and homepage have proper meta tags"
  artifacts:
    - path: "src/components/SEOHead.jsx"
      provides: "Dynamic meta tag management component"
      exports: ["default"]
      min_lines: 80
    - path: "public/images/og-blog-default.svg"
      provides: "Fallback OG image for posts without featured images"
  key_links:
    - from: "src/pages/BlogPost.jsx"
      to: "src/components/SEOHead.jsx"
      via: "import and render with post metadata"
      pattern: "SEOHead.*title.*post\\.title"
    - from: "src/pages/BlogIndex.jsx"
      to: "src/components/SEOHead.jsx"
      via: "import and render with static metadata"
      pattern: "SEOHead.*title.*Blog"
    - from: "src/pages/Portfolio.jsx"
      to: "src/components/SEOHead.jsx"
      via: "import and render with homepage metadata"
      pattern: "SEOHead.*title.*Software"
---

<objective>
Add dynamic SEO metadata to all pages so blog posts are discoverable via search engines and shareable on social media.

Purpose: Enable proper search engine indexing and social sharing previews for all pages, especially blog posts which need unique per-post metadata.
Output: SEOHead component integrated into all page components, updating document head dynamically.
</objective>

<execution_context>
@/home/sanderburuma/.claude/get-shit-done/workflows/execute-plan.md
@/home/sanderburuma/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-seo-metadata/10-CONTEXT.md
@index.html (reference existing meta tag structure)
@src/pages/BlogPost.jsx (integrate SEOHead)
@src/pages/BlogIndex.jsx (integrate SEOHead)
@src/pages/Portfolio.jsx (integrate SEOHead)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create SEOHead component</name>
  <files>src/components/SEOHead.jsx, public/images/og-blog-default.svg</files>
  <action>
Create `src/components/SEOHead.jsx` - a reusable component that dynamically updates document head meta tags.

**Props:**
- `title` (string, required) - Page title
- `description` (string, required) - Meta description (~155 chars max)
- `url` (string, required) - Canonical URL (full URL with https://sanderburuma.nl)
- `image` (string, optional) - OG image URL (defaults to fallback)
- `type` (string, optional) - OG type: "website" or "article" (default: "website")
- `article` (object, optional) - For blog posts: { author, publishedTime, tags }

**Implementation:**
1. Use `useEffect` to update document head on mount and when props change
2. Update `document.title` with format: "{title} | Sander Buruma"
3. Create/update meta tags: description, robots (index, follow)
4. Create/update OG tags: og:title, og:description, og:url, og:image, og:type, og:site_name
5. Create/update Twitter tags: twitter:card (summary_large_image), twitter:title, twitter:description, twitter:image
6. Create/update canonical link tag
7. For article type: add og:article:author, og:article:published_time, og:article:tag (one per tag)
8. Add JSON-LD structured data script for articles (Article schema with author, datePublished, image, headline)
9. Use cleanup function in useEffect to restore original meta tags on unmount (read index.html defaults)
10. For image prop, prepend "https://sanderburuma.nl" if it starts with "/" (relative path)
11. If no image provided, use "/images/og-blog-default.svg"

**Helper functions:**
- `setMetaTag(name, content)` - finds or creates meta tag by name attribute
- `setMetaProperty(property, content)` - finds or creates meta tag by property attribute
- `setLinkTag(rel, href)` - finds or creates link tag by rel attribute
- `setJsonLd(data)` - finds or creates JSON-LD script tag

**Fallback image:**
Create `public/images/og-blog-default.svg` - a simple 1200x630 SVG with:
- Dark background (#1a1a2e or similar from site theme)
- "Sander Buruma" text centered
- "Tech Blog" subtitle below
- Simple, clean design that works for any post without a featured image

**Important:**
- Do NOT modify the static index.html - SEOHead handles all dynamic updates
- Cleanup must restore original tags to avoid stale metadata when navigating
  </action>
  <verify>
1. File exists: `ls src/components/SEOHead.jsx`
2. Component exports default: `grep "export default" src/components/SEOHead.jsx`
3. Handles all required props: `grep -E "title|description|url|image|type|article" src/components/SEOHead.jsx`
4. Fallback image exists: `ls public/images/og-blog-default.svg`
  </verify>
  <done>
SEOHead component exists with props for title, description, url, image, type, and article metadata. Fallback OG image exists in public/images/.
  </done>
</task>

<task type="auto">
  <name>Task 2: Integrate SEOHead into BlogPost page</name>
  <files>src/pages/BlogPost.jsx</files>
  <action>
Update `src/pages/BlogPost.jsx` to use SEOHead component with post-specific metadata.

**Implementation:**
1. Import SEOHead from '../components/SEOHead'
2. After finding the post (and before the early return for 404), add SEOHead to the component
3. Pass props:
   - `title`: post.title
   - `description`: post.description (from frontmatter, already ~155 chars limit enforced by content authors)
   - `url`: `https://sanderburuma.nl/blog/${post.slug}`
   - `image`: post.image (will use fallback if null/undefined)
   - `type`: "article"
   - `article`: { author: post.author, publishedTime: post.date, tags: post.tags }
4. Render SEOHead as first element inside the Fragment (before BlogNavbar)
5. For 404 case, render SEOHead with title "Post Not Found", generic description, url for current slug

**Notes:**
- post.image may be a relative path like "/images/blog/..." - SEOHead handles prepending domain
- post.date is in YYYY-MM-DD format which is valid ISO 8601 for og:article:published_time
  </action>
  <verify>
1. Import present: `grep "import SEOHead" src/pages/BlogPost.jsx`
2. SEOHead rendered: `grep "SEOHead" src/pages/BlogPost.jsx | grep -v import`
3. Dev server test: Start `npm run dev`, navigate to /blog/hello-world, inspect page source or use browser dev tools to verify:
   - Document title shows "Welcome to My Blog | Sander Buruma"
   - og:title meta tag contains "Welcome to My Blog"
   - og:type is "article"
   - og:url contains "/blog/hello-world"
  </verify>
  <done>
BlogPost page renders SEOHead with post-specific title, description, URL, image, and article metadata. Browser tab shows post title.
  </done>
</task>

<task type="auto">
  <name>Task 3: Integrate SEOHead into BlogIndex and Portfolio pages</name>
  <files>src/pages/BlogIndex.jsx, src/pages/Portfolio.jsx</files>
  <action>
Update BlogIndex and Portfolio pages to use SEOHead component.

**BlogIndex (`src/pages/BlogIndex.jsx`):**
1. Import SEOHead from '../components/SEOHead'
2. Add SEOHead as first element inside the Fragment (before BlogNavbar)
3. Props:
   - `title`: "Tech Blog"
   - `description`: "Thoughts on web development, software engineering, and building modern applications. Technical articles and insights from Sander Buruma."
   - `url`: "https://sanderburuma.nl/blog"
   - `type`: "website" (default, can omit)
   - `image`: omit (uses fallback)

**Portfolio (`src/pages/Portfolio.jsx`):**
1. Import SEOHead from '../components/SEOHead'
2. Add SEOHead as first element inside the returned div (before Navbar)
3. Props:
   - `title`: "Software Developer" (results in "Software Developer | Sander Buruma")
   - `description`: "Experienced software developer specializing in Python, blockchain analysis, and web development. Based in Netherlands. Available for remote work and projects."
   - `url`: "https://sanderburuma.nl"
   - `type`: "website" (default, can omit)
   - `image`: "/og-image.jpg" (existing image in public/)

**Notes:**
- Portfolio description matches existing index.html meta description
- Both pages use type "website" (default)
  </action>
  <verify>
1. BlogIndex import: `grep "import SEOHead" src/pages/BlogIndex.jsx`
2. BlogIndex renders SEOHead: `grep "SEOHead" src/pages/BlogIndex.jsx | grep -v import`
3. Portfolio import: `grep "import SEOHead" src/pages/Portfolio.jsx`
4. Portfolio renders SEOHead: `grep "SEOHead" src/pages/Portfolio.jsx | grep -v import`
5. Dev server test:
   - Navigate to /blog, verify title "Tech Blog | Sander Buruma"
   - Navigate to /, verify title "Software Developer | Sander Buruma"
  </verify>
  <done>
BlogIndex shows "Tech Blog | Sander Buruma" title with appropriate OG tags. Portfolio shows "Software Developer | Sander Buruma" title with homepage OG tags.
  </done>
</task>

</tasks>

<verification>
1. All three pages have SEOHead integrated
2. Browser dev tools show correct meta tags on each page:
   - Homepage (/): title contains "Software Developer", og:type is "website"
   - Blog index (/blog): title contains "Tech Blog", og:type is "website"
   - Blog post (/blog/hello-world): title contains post title, og:type is "article", has article:published_time
3. Navigating between pages updates meta tags correctly (no stale data)
4. View page source shows initial index.html tags (SEOHead updates dynamically)
</verification>

<success_criteria>
- Each blog post has unique `<title>` and meta description in document head
- Each blog post has Open Graph tags (og:title, og:description, og:image, og:url, og:type)
- Featured images appear in og:image, fallback image used when no featured image
- Blog index and homepage have appropriate static metadata
- Meta tags update correctly when navigating via React Router (client-side)
</success_criteria>

<output>
After completion, create `.planning/phases/10-seo-metadata/10-01-SUMMARY.md`
</output>

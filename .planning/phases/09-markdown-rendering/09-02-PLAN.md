---
phase: 09-markdown-rendering
plan: 02
type: execute
wave: 2
depends_on: ["09-01"]
files_modified:
  - src/pages/BlogPost.jsx
  - src/styles/styles.scss
autonomous: true

must_haves:
  truths:
    - "User can read individual blog post with full markdown content rendered"
    - "User can see author information on each post"
    - "User can see featured image at top of post"
    - "User can see reading time estimate for each post"
    - "Tags link back to filtered blog index"
    - "Broken image shows styled placeholder"
  artifacts:
    - path: "src/pages/BlogPost.jsx"
      provides: "Full blog post page with header, metadata, and rendered content"
      min_lines: 60
    - path: "src/styles/styles.scss"
      provides: "Blog post page styles including code blocks, headings, lightbox"
  key_links:
    - from: "src/pages/BlogPost.jsx"
      to: "virtual:blog-manifest"
      via: "import and slug lookup"
      pattern: "import posts from.*virtual:blog-manifest"
    - from: "src/pages/BlogPost.jsx"
      to: "src/components/MarkdownRenderer.jsx"
      via: "component usage"
      pattern: "<MarkdownRenderer"
---

<objective>
Wire the BlogPost page to display full blog posts with header metadata (title, byline, tags, featured image) and rendered markdown content, plus add all blog post styles.

Purpose: Delivers BLOG-02, BLOG-04, BLOG-05, BLOG-06 — the complete blog reading experience.
Output: Working BlogPost page + comprehensive blog post styles
</objective>

<execution_context>
@/home/sanderburuma/.claude/get-shit-done/workflows/execute-plan.md
@/home/sanderburuma/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/09-markdown-rendering/09-CONTEXT.md
@.planning/phases/09-markdown-rendering/09-01-SUMMARY.md
@src/pages/BlogPost.jsx
@src/styles/styles.scss
</context>

<tasks>

<task type="auto">
  <name>Task 1: Implement BlogPost page with header and MarkdownRenderer</name>
  <files>src/pages/BlogPost.jsx</files>
  <action>
    Replace the shell BlogPost page with a full implementation:

    **Data loading:**
    - Import posts from `virtual:blog-manifest`
    - Find post by matching `slug` param from useParams()
    - If no matching post found, show Blog404 page (import from `../pages/Blog404`)

    **Page layout (narrow: max-width 650px, centered):**
    Per CONTEXT.md order: Title -> tags + byline -> featured image -> content

    1. **Title**: `<h1>` with post title
    2. **Tags row**: Render tags as Link components to `/blog` (clicking a tag should navigate to blog index — since Phase 8 uses client-side filtering without URL params, just link to `/blog`). Style as small pill chips.
    3. **Byline**: `Author Name · January 28, 2026 · X min read` — format date with toLocaleDateString('en-US', {year:'numeric', month:'long', day:'numeric'}). Use `readingTime` from manifest.
    4. **Featured image**: If `post.image` exists, render `<img>` at full content width (650px max). On error, show styled placeholder with "Featured image unavailable" text.
    5. **Content**: `<MarkdownRenderer content={post.content} />`
    6. **Back link**: "Back to Blog" link at bottom using React Router Link

    Keep BlogNavbar at top (already imported in shell).
  </action>
  <verify>
    `npm run build` succeeds.
    BlogPost.jsx imports from virtual:blog-manifest, MarkdownRenderer, Blog404.
    Has slug lookup, 404 handling, title, tags, byline, featured image, content rendering.
  </verify>
  <done>BlogPost page renders full blog post with title, tags, byline (author + date + reading time), featured image, and markdown content. Missing slug shows 404.</done>
</task>

<task type="auto">
  <name>Task 2: Add blog post page styles</name>
  <files>src/styles/styles.scss</files>
  <action>
    Add comprehensive blog post styles to styles.scss (append after existing blog index styles):

    **Blog post layout (.blog-post):**
    - max-width: 650px, margin: 0 auto, padding for readability
    - Typography: comfortable line-height (1.7-1.8), good paragraph spacing

    **Post header:**
    - Title: large, bold
    - Byline: muted color, smaller text, uses `--text-secondary` or similar
    - Tags: small pills matching blog index tag style, inline display
    - Featured image: full width within container, border-radius, margin below

    **Heading styles (h2, h3, h4 within .blog-post):**
    - Subtle left border or bottom border on h2/h3 using `--primary-color`
    - Heading anchor (.heading-anchor): opacity 0 by default, opacity 1 on heading:hover, accent color, no text-decoration, small margin-right

    **Code block styles (.code-block-wrapper):**
    - Dark background (matches highlight.js atom-one-dark theme)
    - Border-radius, overflow hidden
    - Language label: absolute top-right, small muted text, padding
    - Line numbers gutter: separate column, muted color, right-aligned, user-select none, border-right
    - Copy button: absolute top-right (below language label or beside it), opacity 0 on default, opacity 1 on .code-block-wrapper:hover, small icon button, transition
    - "Copied!" state: green text or check icon
    - Inline code (not in pre): subtle background, small padding, border-radius, font-size slightly smaller

    **Image styles (figure within .blog-post):**
    - Centered, max-width 100%
    - figcaption: centered, muted color, italic, smaller text
    - cursor: pointer (clickbox click)
    - Broken image placeholder: dashed border box, centered text, muted, min-height

    **Lightbox overlay (.image-lightbox):**
    - Fixed position, inset 0, z-index 1000
    - Dark backdrop (rgba black ~0.85)
    - Image centered (max-width/max-height 90vw/90vh, object-fit contain)
    - Cursor pointer on backdrop (to close)

    **Link styles within .blog-post:**
    - Accent color (--primary-color), no underline
    - Underline on hover

    **Responsive (mobile < 768px):**
    - Reduce padding, font sizes slightly
    - Code blocks: smaller font, still horizontally scrollable

    Use existing CSS variables (--text-primary, --text-secondary, --bg-secondary, --primary-color, --border-color, etc.) and SCSS variables where established.
  </action>
  <verify>
    `npm run build` succeeds.
    styles.scss contains: .blog-post, .heading-anchor, .code-block-wrapper, .image-lightbox, figure/figcaption styles, responsive breakpoint.
  </verify>
  <done>All blog post styles applied: readable typography at 650px, accented headings with hover anchors, dark code blocks with line numbers + language label + copy button, image figures with captions, lightbox overlay, responsive mobile styles.</done>
</task>

</tasks>

<verification>
- `npm run build` succeeds
- Navigate to /blog/hello-world shows full blog post with:
  - Title "Welcome to My Blog"
  - Author "Sander Buruma" + date + reading time in byline
  - Tags displayed as pills
  - Markdown content rendered with headings, lists, code blocks
  - Code block has syntax highlighting, line numbers, copy button
  - Headings show # anchor on hover
  - Images open lightbox on click
- Navigate to /blog/nonexistent shows 404 page
</verification>

<success_criteria>
- BlogPost.jsx renders full post from manifest with header metadata and MarkdownRenderer
- Missing slugs show 404
- All blog post styles applied (typography, code blocks, headings, images, lightbox)
- Responsive on mobile
- Build passes
</success_criteria>

<output>
After completion, create `.planning/phases/09-markdown-rendering/09-02-SUMMARY.md`
</output>
